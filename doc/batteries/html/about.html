<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 1 September 2005), see www.w3.org" />
<link rel="stylesheet" href="style.css" type="text/css" />
<style type="text/css">
/*<![CDATA[*/
  body {
  padding: 3cm;
  text-align:justify;
  }
/*]]>*/
</style>
<meta content="text/html; charset=us-ascii" http-equiv=
"Content-Type" />
<link rel="Start" href="root.html" />
<link title="Index of modules" rel="Appendix" href=
"root_modules.html" />
<link title="Batteries" rel="Chapter" href="Batteries.html" />
<title>OCaml Batteries Included</title>
</head>
<body>
<h1>What is OCaml Batteries Included?</h1> 

<p>
Twenty years ago, a language was just a compiler. You could measure
the quality of a language from the beauty of its semantics, the
clarity of its syntax, the speed of generated code. That was then.  In
the meantime, the Java and .Net nuclear plants have been built, while
the Python and Ruby communities have gradually developed their own
powerhouses. All these platforms have amply demonstrated that a
language can only be as beautiful, clear and fast as the libraries
which developers are actually going to use for their work. In
other words, it's not about the language anymore, it's about
the platform.
</p>

<p>
At this point in time, out-of-the-box, OCaml isn't a usable platform.
There is no Unicode, there are no modern user interface toolkits, no
distributed programming infrastructures, no network services, no
type-safe communications, no analysis of other languages, no
interfacing with industrial platforms, no XML, non modern two- or
three-dimensional drawing engine, etc. This would not be too much of a
problem if OCaml provided an easy way of installing new libraries and
of using these libraries once they are installed.  This would also not
be too much of a problem if OCaml could somehow guarantee that trivial
data structures didn't need to be reinvented by most projects and that
communication between libraries happened flawlessly.
</p>

<p>
So no, out of the box, OCaml isn't a usable platform. However, no
matter what you're trying to do, chances are that the community has
already developed or adapted a tool to make your life easier. Easy
installation of OCaml packages is quite possible, if you are using
Debian or Ubuntu (apt-get), Fedora or Red Hat (yum) or actually, any
Unix-compatible platform, including MacOS X and Windows (GODI). Simple and
reliable usage of installed libraries can be done with Findlib.  A
comprehensive Unicode library is available (Camomile), as well as a
modern user interface toolkit or two (LablGtk, OCamlRT), a number of
distributed programming infrastructures (OCamlMPI, BSML, Opis,
Camlp3l, OCamlNAE), libraries to interface with industrial platforms
(OCamlJava, SpiderCaml, ...), to analyse other
languages (CIL, Dalton/FlowCaml, ...), to read or write
XML (PXP, Expat, ...), to draw in two or three dimensions (Cairo,
OpenGL), to test your programs (OUnit), etc. OCaml even offers a
built-in tool to customize the language itself (Camlp4).
</p>

<p>
What's missing? A few things. For now, not all important libraries are
available as simple-to-install packages. That problem is being
addressed by the devoted packagers of Debian, Fedora and GODI, while
the possibility exists that the recently announced Symbiosis will also
help address the issue.  The other missing part is a standard set of
libraries, language extensions and data structures which developers
could be assured to find on every OCaml installation, and which would
let them write programs without having to endlessly reinvent the same
basic wheels, and without spending their time writing adapters between
libraries which should work well together but don't use the same
conventions.  OCaml Batteries is one possible answer to this problem
</p>

<p>
OCaml Batteries Included consists in
<ul>
  <li>A core set of libraries, designed to define the basic standard
    data structures. This set, largely based on both the Base library
    of OCaml and ExtLib, extends the basic strings, arrays,
    lists... provided with OCaml and introduces numerous data
    structures, including enumerations, lazy lists, extendable inputs
    and outputs, dynamic arrays, unicode ropes...</li>
  <li>A uniformization layer, the glue, on top of chosen existing
    libraries. Note that we are not forking any of these libraries,
    only providing an additional layer on top of them.  The libraries
    may be installed manually by the user or, preferably, by automatic
    dependency resolution thanks to apt-get, yum, GODI or some other
    packaging tool. The uniformization layer serves to guarantee that
    libraries play together nicely, that only one manner of reading
    from a file or writing to the output is necessary, that every data
    provided by a library may be decoded by another, etc.
  </li>
  <li>Additional documentation for whichever library for which we
    provide glue, including both low-level documentation ("what the
    heck does this function do?"), mid-level documentation ("why
    should I use that function?") and high-level documentation ("ok,
    I'm new here, where do I start?")</li>
  <li>A handful of language extensions, provided as Camlp4 modules,
    to solve common issues, automatically generate boilerplate code,
    improve readability, ...</li>
  <li>In the future, possibly a set of external tools.</li>
  <li>Build tools to make all of this transparent.</li>
  <li>And, of course, a logo.</li>
</ul>


<div style="text-align:center">
<div>
<img src="batteries_large.png" />
</div>
<span style="font-size:small">(Batteries courtesy of Benjamin Pavie, Camel courtesy of John Olsen, no animals injured)</a>
</div>

<p>
OCaml Batteries Included depends on other packages. We are doing our
best to avoid forking any project.


<p> It is also a project maintained by
the community, which means that it depends on you. If you have ideas,
suggestions, complaints, bug reports, if you want to participate, to
write code, documentation, tutorials, build tools, review code, have a
word in policies, if you want a package to be included in the
Batteries, or just to contact us, please
use <a href="http://forge.ocamlcore.org/batteries">our website</a>.
We provide bug trackers, request for features trackers, forums,
etc. (courtesy of OCaml Core). We can also often be
seen <a href="irc://irc.freenode.net/#ocaml">on irc, on server
freenode, channel #ocaml</a>.
</p>


<p>
OCaml Batteries Included is also a work-in-progress. The version you
have in front of your eyes does not contain everything we want to put
in it, nor even all the code we have written for it. But we'll get
there. We intend to integrate additional libraries progressively, from
minor release to minor release, with major milestones approximately
twice per year. This policy is not written in stone and is largely
subject to debate, so don't hesitate to comment on the subject.
</p>

<p>
For more informations on the contents of OCaml Batteries Included,
follow us towards <a href="api/index.html">the manual</a>.
</p>

<h1>Relations to other libraries</h1>
<h2>Project Gallium's Base Library</h2> 

<p>
First, a word on vocabulary. We call "Base
library" <a href="http://caml.inria.fr">the library provided by INRIA
with the default distribution of OCaml</a>. We don't call it "standard
library" for the simple reason that there are several libraries vying
for the status of standard, including Batteries Included.
</p>
<p>
The relation between Batteries Included and the Base Library is
simple: the Base Library is one of the libraries for which Batteries
Included provides a uniformization layer. We are not forking the
library, merely providing additional functions, additional
documentation, boilerplate code...
</p>
<p>
The complete Base Library is available in Batteries Included as
module <code>Legacy</code>. Most modules are also available inside the
Batteries module hierarchy, sometimes under different names, and
usually completed by numerous new functions. A few modules are
considered obsolete and appear only in <code>Legacy</code>.
</p>

<h2>Jane Street's Core</h2>
<p>
<a href="http://ocaml.janestcapital.com/">Jane Street's Core</a> is
another library vying for the status of standard, this time produced
by Jane Street Capital. This library is comparable in purpose and
design to the core of Batteries Included (actually, we draw some
inspiration from them and we hope that they are going to draw some
inspiration from us, too) but there is no code shared between
Batteries Included and Jane Street's Core for the moment. 
</p>
<p>
In the future, Batteries Included may depend on Jane Street's Core.
This is not the case yet as, according to one of Jane Street's Core's
authors, this library may change quite a lot, and in what we interpret
as possibly incompatible ways, before reaching version 1.0.
</p>
<p>
We already depend on two components of Jane Street's Core: Type-Conv
(a general infrastructure which may be used to generate Boilerplate
code) and Sexplib (an instance of Type-Conv used to generate
code for serializating to/deserializing from human-readable S-Expressions).
We intend to extend this to a third component of Jane Street's Core:
Bin-Prot, another instance of Type-Conv, used this time to generate
serialization to/from binary protocols.
</p>

<h2>ExtLib</h2>
<p>
<a href="http://code.google.com/p/ocaml-extlib/">ExtLib</a> is another
extension of the OCaml Base Library. ExtLib was designed as a
relatively small addition, with the idea of fitting nicely within the
OCaml Base Library. Since 2005, ExtLib has essentially stopped growing,
following a conscious choice from the maintainers.
</p>
<p>
OCaml Batteries Included is largely based on ExtLib. Indeed, the core
of Batteries is essentially a fork of ExtLib. We intend to maintain
ascending compatibility with ExtLib (with the exception of changes in
module names), although we have added a great number of features,
fixed bugs, split code, etc. For most purposes, OCaml Batteries
Included contains ExtLib and, in our mind, superseeds this library. We
hope that the maintainers and developers of ExtLib will consider
migrating to OCaml Batteries Included.
</p>

<h2>Community OCaml</h2>
<p>
<a href="http://github.com/thelema/ocaml-community/tree/master">Community
OCaml</a> is an attempt to turn OCaml into an out-of-the-box complete
development platform, including numerous libraries.
</p>
<p>
We have joined forces with the developers of Community OCaml and
we share most of our code. Although the design of Community OCaml is
not completely decided yet, it is quite possible that this will be a
distribution consisting in OCaml + Batteries Included + some package
manager.
</p>

<h2>OCamlNet</h2>
<p>
<a href="http://projects.camlcity.org/projects/ocamlnet.html">OCamlNet</a>
is an implementation of numerous Internet protocols for OCaml, along
with so many utilities that it almost consists in a complete
general-purpose development library for OCaml.
</p>
<p>
OCaml Batteries Included will depend on OCamlNet and incorporate
OCamlNet into its hierarchy. In particular, for the moment, OCaml
Batteries Included provides little in the way of libraries for
interacting with the operating system, as we intend to use OCamlNet
for that purpose.
</p>

<h2>Caml Development Kit</h2>
<p>
The <a href="http://pauillac.inria.fr/cdk/">Caml Development Kit</a>,
or CDK, was another attempt to build a development platform around
OCaml by bundling together OCaml itself and a number of interesting
libraries and tools. By opposition to Batteries Included, this was a
monolithic distribution, with a custom compiler and very little documentation.
Development on CDK seems to have died around 2001.
</p>
<p>
There is no relation between CDK and Batteries Included other than the
common goal. We do our best to benefit from the experience gathered
by the CDK developers. In particular, this means that we work together
with package managers without attempting to provide a complete distribution.
</p>

<h2>GODI, Apt, Yum</h2>
<p>
<a href="http://godi.camlcity.org/godi/index.html">GODI</a>, 
<a href="http://en.wikipedia.org/wiki/Advanced_Packaging_Tool">Apt</a>
and <a href="http://docs.fedoraproject.org/yum/en/">Yum</a> are the three main
package managers available for OCaml users. The first one is
OCaml-specific, the second one lives in Debian/Ubuntu/Knoppix world
and the third one in the Red Hat/Fedora world. 
</p>
<p>
OCaml Batteries Included has no direct relation with either package
manager, nor does it replicate the work of any of these
managers. However, as Batteries relies on numerous external libraries,
use of a package manager is strongly recommended.
</p>


<h2>Findlib</h2>
<p>
<a href="http://www.camlcity.org/archive/programming/findlib.html">Findlib</a>
is a compile-time package manager for OCaml. It lets developers easily specify
which libraries are required and manages compile-time dependencies between
installed libraries.
</p>
<p>
OCaml Batteries Included uses Findlib extensively.
</p>

<h1>Comparable projects, somewhere else</h1>
<h2>Python Batteries Included</h2>
<p>
To the best of our knowledge, the term "Batteries Included" was first
coined by the Python community to describe the standard distribution
of Python, which in addition to usual data structures, contains
modules for handling databases, compression, a number of file format
(de)coders including JSON, (X)HTML, XML, CSV, cryptography, logging,
text interfaces, threading, inter-process communication,
implementation of client and server protocols from SMTP to HTTP,
communication with external webbrowsers, image and sound manipulation,
internationalization, lexing and parsing, graphical interfaces, unit
testing, sandboxing, reflexivity, OS-specific services, ... This
massive number of out-of-the-box features, along with the conciseness
of the language, are probably the two main reasons of the success of
Python: simple tasks, even those which require complex libraries, may
often be programmed with only a few lines and in a few minutes.
</p>
<p>
Well, obviously, we're trying to provide something as useful with
OCaml Batteries Included, but with the added safety and speed of OCaml.
</p>

<h2>Haskell Batteries Included</h2>
<p>
The <a href="http://www.haskell.org/haskellwiki/Haskell_Platform">Haskell
Platform</a> (also known as "Haskell Batteries Included") is a
recent project undertaken by the Haskell community with objectives
comparable to OCaml Batteries Included: "provides a comprehensive,
stable and quality tested base for Haskell projects to work from."  At
the time of this writing, the Haskell Platform has not released any
software, although a first release is expected within a few weeks.
</p>
<p>
As OCaml Batteries, the Haskell Platform is community-led and relies
on a number of decentralized libraries.  As OCaml Batteries, the
Haskell Platform requires package management. There are a number of
differences in the methods, though.
</p>
<p>
Some differences are probably trivial: where we strive to work with
any of the major package management systems, the Haskell Platform is
based solely on Cabal, which may allow them a better integration.
Where OCaml Batteries attempts to reclassify existing libraries into
one uniform hierarchy of modules, the Haskell Platform keeps the
original module names, as decided by their original authors,
pre-Platform.
</p>
<p>
Others are quite far-reaching: OCaml Batteries provides an extended
core of libraries to serve as support for standardization and
uniformization, while the Haskell Platform doesn't. Similarly, the
Haskell Platform doesn't add any uniformization layer, which means
that the task of getting libraries to work together lies upon the
end-user. Some Haskell libraries may be patched into compliance and
uniformization, but this is not always possible, short of creating
cyclic dependencies between libraries which should work together but
don't. Finally, the Haskell Platform has much stricter guidelines
regarding libraries which can or can't make it into the Platform.
This is a good thing if library authors are willing to fix whichever
problems prevent the inclusion of their work -- something which we
don't assume for OCaml Batteries, at least not yet.
</p>
<p>
Despite these differences, both projects seem based on solid
foundations. And hopefully, both will achieve large success.
</p>
</body>
</html>
